{% extends "base.html" %}

{% block title %}Meu Perfil{% endblock %}

{% block content %}
<h1 class="h2 mb-4">Meu Perfil</h1>

<div class="card shadow-sm">
    <div class="card-body">
        <form method="POST" enctype="multipart/form-data">
            <div class="row">
                <div class="col-md-4 text-center">
                    {% if funcionario.foto_perfil %}
                        <img src="{{ url_for('perfil.uploaded_file', filename=funcionario.foto_perfil) }}" class="img-fluid rounded-circle mb-3" style="width: 150px; height: 150px; object-fit: cover;">
                    {% else %}
                        <img src="https://via.placeholder.com/150" class="img-fluid rounded-circle mb-3">
                    {% endif %}
                    
                    <label for="foto_perfil" class="form-label">Alterar Foto de Perfil</label>
                    <input class="form-control form-control-sm" type="file" id="foto_perfil" name="foto_perfil">
                    <div class="form-text">Envie arquivos .jpg, .png ou .gif</div>
                </div>

                <div class="col-md-8">
                    <h5>Dados de Contato</h5>
                     <div class="mb-3">
                        <label for="apelido" class="form-label">Apelido / Nome de Exibição</label>
                        <input type="text" class="form-control" id="apelido" name="apelido" value="{{ funcionario.apelido or '' }}">
                        <div class="form-text">Este nome aparecerá no menu lateral.</div>
                    </div>
                    <div class="mb-3">
                        <label for="email" class="form-label">E-mail (não pode ser alterado)</label>
                        <input type="email" class="form-control" id="email" value="{{ funcionario.email }}" disabled>
                    </div>
                    <div class="mb-3">
                        <label for="telefone" class="form-label">Telefone</label>
                        <input type="text" class="form-control" id="telefone" name="telefone" value="{{ funcionario.telefone or '' }}">
                    </div>
                    <hr>
                    <h5>Contato de Emergência</h5>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="contato_emergencia_nome" class="form-label">Nome</label>
                            <input type="text" class="form-control" id="contato_emergencia_nome" name="contato_emergencia_nome" value="{{ funcionario.contato_emergencia_nome or '' }}">
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="contato_emergencia_telefone" class="form-label">Telefone</label>
                            <input type="text" class="form-control" id="contato_emergencia_telefone" name="contato_emergencia_telefone" value="{{ funcionario.contato_emergencia_telefone or '' }}">
                        </div>
                    </div>
                    <div class="d-flex justify-content-end mt-3">
                        <button type="submit" class="btn btn-brand">Salvar Alterações</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}