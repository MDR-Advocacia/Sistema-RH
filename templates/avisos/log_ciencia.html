{% extends "base.html" %}

{% block title %}Logs de Ciência{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h1 class="h2 mb-0">Logs de Ciência</h1>
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb bg-transparent p-0 mb-0">
                <li class="breadcrumb-item"><a href="{{ url_for('main.listar_avisos') }}">Mural de Avisos</a></li>
                <li class="breadcrumb-item active" aria-current="page">Logs</li>
            </ol>
        </nav>
    </div>
</div>


<div class="card shadow-sm mb-4">
    <div class="card-header">
        <h5 class="mb-0">Aviso: "{{ aviso.titulo }}"</h5>
    </div>
    <div class="card-body">
        <p class="card-text">Publicado em: {{ aviso.data_publicacao.strftime('%d/%m/%Y %H:%M') }} por {{ aviso.autor.funcionario.nome }}</p>
    </div>
</div>

<div class="row">
    <div class="col-lg-6">
        <div class="card shadow-sm">
            <div class="card-header bg-success-subtle text-success-emphasis">
                <h5 class="mb-0"><i class="bi bi-check-circle-fill"></i> Colaboradores que Deram Ciência ({{ logs|length }})</h5>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover align-middle mb-0">
                        <thead>
                            <tr>
                                <th>Colaborador</th>
                                <th>Data e Hora</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for log in logs %}
                            <tr>
                                <td>{{ log.usuario.funcionario.nome }}</td>
                                <td>{{ log.data_ciencia.strftime('%d/%m/%Y %H:%M') }}</td>
                            </tr>
                            {% else %}
                            <tr><td colspan="2" class="text-center p-4">Ninguém deu ciência ainda.</td></tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-6">
        <div class="card shadow-sm">
            <div class="card-header bg-warning-subtle text-warning-emphasis">
                <h5 class="mb-0"><i class="bi bi-exclamation-triangle-fill"></i> Colaboradores Pendentes ({{ pendentes|length }})</h5>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-hover align-middle mb-0">
                        <thead>
                            <tr>
                                <th>Colaborador</th>
                                <th>Setor</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for funcionario in pendentes %}
                            <tr>
                                <td>{{ funcionario.nome }}</td>
                                <td>{{ funcionario.setor or 'N/A' }}</td>
                            </tr>
                            {% else %}
                            <tr><td colspan="2" class="text-center p-4">Todos os colaboradores deram ciência!</td></tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}